<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Submit History</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<nav class="nav-bar">
  <a href="index.html" id="form-link">Form</a>
  <a href="submit_history.html" id="history-link">History</a>
</nav>
<div class="container">
     <script>
         const submissions = JSON.parse(localStorage.getItem('submissions'));
         if(submissions !== null) {
             submissions.forEach((submissionObject) => {
                 let htmlBlock = `<div class="submit-history-card">
                     <p class="lable"><b>First Name</b></p>
                     <p class="card-first-name value">${submissionObject.first_name}</p>
                     <p class="lable"><b>Last Name</b></p>
                     <p class="card-last-name value">${submissionObject.last_name}</p>
                     <p class="lable"><b>Email</b></p>
                     <p class="card-email value">${submissionObject.email}</p>
                     <p class="lable"><b>Phone</b></p>
                     <p class="card-phone value">${submissionObject.phone}</p>
                     <p class="lable"><b>Company</b></p>
                     <p class="card-company value">${submissionObject.company}</p>
                     <p class="lable"><b>Adress</b></p>
                     <p class="card-address value">${submissionObject.address}</p>
                     <button class="delete-button">Delete</button>
                </div>`;

                 document.querySelector('.container').innerHTML += htmlBlock;
             });

             let buttons = document.querySelectorAll('.delete-button');
             submissions.forEach((submissionObject, item) => {
                 buttons[item].addEventListener('click', (e) => {
                     let filteredSubmissions = submissions.filter(currentSubmission => currentSubmission.id !== submissionObject.id);
                     e.target.closest('.submit-history-card').remove();
                     localStorage.setItem(
                         'submissions',
                         JSON.stringify(filteredSubmissions)
                     );
                     window.location.reload();
                 })
             });
         }
     </script>
</div>
</body>
</html>